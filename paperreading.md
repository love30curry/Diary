# GuardRider: Reliable WiFi Backscatter Using Reed-Solomon Codes With QoS Guarantee


**2023.9.6**

**`1. RS代码的初步知识`**  
**`2. RS码设计的优化算法`**  
RS在骑乘间歇信号的情况下显示了其对错误率的有效改进。由图4(a)-(c)可知，当冗余符号的数量相对足够时，错误率收敛到一定水平，即使冗余符号的数量增加，也不会获得更多的增益。换句话说，如果我们添加太多多余的符号(在一帧内反向散射的信息更少)，它会浪费反向散射链接的带宽。总之，我们必须知道在不同的场景下应该添加多少奇偶校验符号来保护反向散射通信，从而在效率和可靠性之间取得良好的平衡。因此，我们提出了一种优化算法，以搜索最优的RS码，使效率最大化，同时满足可靠性。
本文提出的优化算法包括三个主要步骤:
(1)估计WiFi流量开、关时长的概率分布;
(2)构建马尔可夫模型来描述状态之间的转换;
(4)优化RS代码以满足可靠性约束。

wifi状态的统计信息
为了设计自适应RS编码，标签必须知道states of excitation traffics(on and off duration of wifi traffic ),由于标签功率有限，对接收器优化，并将指示最佳RS代码参数的索引反馈给标签。接收器首先监听所需通道，并根据接收到的信号分别测量开、关状态的持续时间。然后将测量值输入到基于mle的估计器中，以生成每个状态的概率分布。并估计所需信道上wifi流量的开启和关闭状态的持续时间。将数据存储在X=[x1,x2,x3]和Y=[y1,y2,y3]

分析使用RS码的WiFi信号的反向散射通信的错误率
本文采用如图5所示的两态马尔可夫模型来表示状态之间的转换。Glaze[17]系统采用双态马尔可夫模型对WiFi流量进行预测，因此可以将下行数据纳入WiFi数据包。然而，我们的工作考虑的是与Glaze系统不同的反向散射上行链路。这里需要强调的是，马尔可夫模型是设计统计间歇信道上的RS码的关键。设α和β分别表示从开状态到关状态和从关状态到开状态的过渡概率。因此，马尔可夫模型的转移概率矩阵Q由式给出


**`3. GuardRider的系统设计与实现`**  
后向散射系统中的标签通过分帧、RS编码、基带转换、上采样和移频来后向散射其信息
![image](https://github.com/love30curry/Diary/assets/144334874/dfcc12c7-f0d4-4cb5-8130-71f37c48bab9)

让我们按照后向散射系统中的流程，将提供的数据（0，1，0，1，0，0，1，1）通过分帧、RS编码、基带转换、上采样和移频来后向散射。
分帧（Frameming）：将提供的数据分割成较小的帧。在这个例子中，我们可以选择以两个比特为一帧进行分割。因此，我们将数据分为以下四个帧：(0, 1)，(0, 1)，(0, 0)，(1, 1)。
RS编码（Reed-Solomon Coding）：对每个数据帧进行RS编码。对于每个帧，我们可以选择合适的RS编码参数。假设我们选择RS（7， 5）码，其中可以纠正2个比特的错误。对于每个帧，我们将进行RS编码，例如：
对于帧 （0， 1），RS编码后的结果可能是 （0， 1， e1， e2， e3， e4， e5），其中 e1， e2， e3， e4， e5 表示RS码中的纠错码比特。
对于帧 （0， 0），RS编码后的结果可能是 （0， 0， e1， e2， e3， e4， e5）。
对于帧 （1， 1），RS编码后的结果可能是 （1， 1， e1， e2， e3， e4， e5）。
基带转换（Baseband Conversion）：将经过RS编码的数据转换为基带符号序列。这涉及将每个帧中的比特转换为适当的基带符号。在这个例子中，我们简单地将每个比特映射为一个基带符号，例如(0, 1) 映射到 (-1, 1)。
对于帧 (0, 1)，基带转换后的结果可能是 (-1, 1)。
对于帧 (0, 0)，基带转换后的结果可能是 (-1, -1)。
对于帧 (1, 1)，基带转换后的结果可能是 (1, 1)。
上采样（Upsampling）：将基带符号序列的采样率增加。在这个例子中，假设我们将采样率增加两倍。因此，每个基带符号将复制一次，得到更高的采样率。
对于帧 (0, 1)，上采样后的结果可能是 (-1, -1, 1, 1)。
对于帧 (0, 0)，上采样后的结果可能是 (-1, -1, -1, -1)。
对于帧 (1, 1)，上采样后的结果可能是 (1, 1, 1, 1)。
移频（Frequency Shifting）：通过乘法将基带符号序列与载波信号相乘，来移动频率。假设我们选择的载波频率为 f_carrier。根据每个帧的结果和所采用的调制方案，我们可以应用相应的频率偏移和调制参数来移动频率。
对于帧 （0， 1），我们可以将帧的基带符号与频率为 f_carrier 的载波信号相乘。
对于帧 （0， 0），我们同样可以将帧的基带符号与频率为 f_carrier 的载波信号相乘。
对于帧 （1， 1），同样可以将帧的基带符号与频率为 f_carrier 的载波信号相乘。
通过以上步骤，我们将数据(0, 1, 0, 1, 0, 0, 1, 1)成功转换为基带符号序列，并进行了上采样和移频操作，以便在后向散射系统中传输和反射该信息。这样的信号可以由接收端接收、解调和解码，恢复出原始的数据。
请注意，实际的后向散射系统可能会有更复杂的编码和调制方案，并且具体的参数和实现细节可能会有所不同。以上步骤仅提供了一个简单的示例，用于说明后向散射中标签传输信息的过程。

- **`Frequency shift`** 
为简单起见，激励信号可表示为正弦信号，记为sin(2π)。后向散射标签的微控制器产生频率为∆f的方波，在吸收和反射状态之间切换。由于基于著名的傅立叶分析，方波的一次谐波也是正弦信号，因此当应用于输入的正弦信号时，在反向散射链路中实现了频率移位∆f。因此，我们可以使用一阶谐波将方波过程简化为正弦信号，如sin(2π∆f t)。因此，后向散射过程可以用上述两个正弦信号的乘积表示，即2sin (2πfct) sin(2π∆f t) = cos(2π(fc -∆f)t) - cos(2π(fc +∆f)t)。接收机对接收到的后向散射信号进行处理，将其中心频率变换为偏移信号之一fc−∆f或fc +∆f，接收到后向散射链路中的信号。移频的目的是为了消除主链路对后向散射链路的干扰，因为主链路的信号强度明显强于后向散射链路。
然后执行上采样过程以增加基带信号的频率以匹配移位频率，随后在上采样信号与频率为∆f的方波之间进行逻辑与运算。
与操作器的输出信号控制天线使用OOK调制来反向散射信息。
- **`receiver`**
  Receiver在GuardRider中有两项任务，一是优化处理，二是接收反向散射信息。各模块的功能在Labview平台上实现。
Optimizaiton。USRP RIO设备首先监听遗留链路的信道，并以5MHz的采样频率对遗留链路的信道进行同相(I)和正交(Q)采样。然后使用I/Q采样计算信号功率，并计算通断状态的持续时间。最后将持续时间输入到包含三个块的优化算法中，以获得最优RS码参数。
接收反向散射信息。USRP RIO设备被打开以收听移位频率的频道。一旦通过将接收信号的自相关与预定义阈值进行比较检测到帧，设备开始采集I/Q采样，随后进行匹配的滤波过程、解调、同步和RS解码。

复数信号是由实部（Real）和虚部（Imaginary）构成的信号。在数学和信号处理领域，复数可用于表示具有幅度和相位信息的信号。
复数信号可以用以下形式表示：x（t） = r（t）e^（jθ（t）），其中 r（t） 是信号的幅度函数，θ（t） 是信号的相位函数。
实部（Real）代表信号在时域上的振幅变化，虚部（Imaginary）代表信号在时域上的相位变化。复数信号可以通过对实部和虚部的组合来表示时域中的复杂波形。
复数信号在通信系统中具有重要的作用，例如，调制和解调过程中使用的信号通常是复数信号。复数信号通过携带幅度和相位信息，可以实现多种调制方式，例如正交振幅调制（QAM）、相位偏移键控调制（PSK）等。在信号处理领域，对复数信号进行傅里叶变换、滤波、频谱分析等操作也非常常见。
复数信号在电力系统、通信系统、信号处理和控制系统等领域中都扮演着重要角色。它允许我们对信号的振幅和相位进行独立处理，并提供了更丰富的表示和处理信号的方式。
  

**`4. GuardRider的性能进行了评价`**  
- **`a .实验设置`**

我们在一个4 × 6m2的办公室里进行实验，办公室平面图如图8所示。我们使用一台联想笔记本电脑，距离WiFi AP 1米远，生成2048字节的ping请求，间隔100µs。后向散射标签距离WiFi AP和接收天线分别为0.3m和0.6m。我们将传输速度设置为6 Mbps，并使用中心频率为2.422GHz的通道3和20MHz带宽用于传统链路的通信。Tag将输入的激励信号移频50MHz，即信号移至13通道，中心频率为2.472GHz，因为13通道相对其他通道干净，可以忽略其他WiFi网络的干扰。
此外，接收机将p - e设置为10−3进行优化，将采样频率设置为5MHz进行I/Q采样。




